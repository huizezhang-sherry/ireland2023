<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.1.251">

  <meta name="author" content="H. Sherry Zhang, PhD stduent">
  <title>New tools for visualising and explaining multivariate spatio-temporal data</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link rel="stylesheet" href="_extensions/numbats/monash/assets/tachyons-addon.css">
  <link rel="stylesheet" href="_extensions/numbats/monash/assets/custom.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="https://kit.fontawesome.com/0fba9333d8.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="figures/logo-all.png" data-background-position="75% 65%" data-background-size="25%" class="center">
  <h1 class="title">New tools for visualising and explaining multivariate spatio-temporal data</h1>
  <p class="author">H. Sherry Zhang, PhD stduent</p>
  <p class="institute">Monash University, Australia</p>
  <p class="date">Apr 17, 2023</p>
</section>

<section>
<section id="hi" class="title-slide slide level1 smaller center">
<h1>Hi!</h1>
<div class="columns">
<div class="column" style="width:55%;">
<ul>
<li><p>A final year PhD student in the Department of Econometrics and Business Statistics, Monash University, Australia</p></li>
<li><p>My research centers on exploring multivariate spatio-temporal data with data wrangling and visualisation tool.</p></li>
<li><p>Find me on</p>
<ul>
<li>Twitter: <code>huizezhangsh</code>,</li>
<li>GitHub: <code>huizezhang-sherry</code>, and</li>
<li><code>https://huizezhangsh.netlify.app/</code></li>
</ul></li>
</ul>
</div><div class="column" style="width:45%;">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-1_658dfdaaae52c11227be4560e805e7be">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/headshot.jpg" width="246"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li><p>Thanks for the invitation to speak</p></li>
<li><p>Today I will be talking about …</p></li>
<li><p>First, a little bit about myself</p></li>
<li><p>I’m Sherry Zhang, …</p></li>
<li><p>…</p></li>
<li><p>Here are the details to find me on Twitter, GitHub, and my website</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section" class="slide level2" data-background-image="figures/overview.png" data-background-size="80%" data-background-position="bottom 30px">
<h2></h2>
<aside class="notes">
<!-- Hi everyone, my name is Sherry and today I will be giving my pre-submission talk titled: New tools for visualising and explaining multivariate spatio-temporal data.  -->
<!-- I will first give an overview of my research theme, report the up-to-date progression, and then proceed to the three thesis chapters. -->
<p>Multivariate spatio-temporal data can be commonly found in the society: in finance and economics, stock prices and economic indicators are tracked over time; in logistics, supermarkets collect product level data to decide the optimal stock levels for different stores; in meteorology, weather stations record climate variables to monitor climate change and its impact on different sectors.</p>
<p>Spatio-temporal data are recorded with data-time and geographic location information. Multivariate means that multiple variables are recorded. This could include, for example, in weather station data, temperature, precipitation, wind speed and direction</p>
<p>However, all three aspects are ideally considered together to tackle contemporary problems, such as monitoring droughts which requires historical climate data to understand “normal” conditions for any spatial neighborhood, and the interplay of precipitation, temperature and other relevant variable(s), for example, ice melt for high altitude mountain region.</p>
<p>This research addresses the challenge of investigating multivariate spatio-temporal data, by providing new tools for organising, visualizing and explaining relationships.</p>
<p>This illustration here shows how the three research topics are related. The solutions are to provide easy ways to pivot between the three components, to allow focusing on multivariate or spatio-temporal analysis and new pipelines to construct indexes.</p>
<p>When fixing the time, the data are reduced to multivariate and can be analyzed using multivariate methods such as dimension reduction. The particular dimension reduction investigated in this thesis is called projection pursuit, which contains an optimization component. Diagnostic plots can be useful here to track the performance of these optimization algorithms.</p>
<p>When the data are collected at different locations in space, software from geoinformatics can be useful to analyze the spatial aspect of the data. However, existing spatial and temporal data analysis software are built upon different data formats. This creates frictions in the data analysis to constantly rearrange that data format to work with the software. We designed a spatio-temporal data structure to organise the data.</p>
<p>Multivariate spatio-temporal variables are often combined into a single index series for decision making. But index definition and construction are vastly different in different fields and different researchers making it diﬀicult to understand how they might perform slight changes in the formula, or how competing indexes compare.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="visual-diagnostics-for-constrained-optimisation-with-application-to-guided-tours" class="title-slide slide level1 center" data-background-image="figures/logo-ferrn.png" data-background-size="10%" data-background-position="top 3% right 3%">
<h1>Visual diagnostics for constrained optimisation with application to guided tours</h1>

</section>
<section id="projection-pursuit-for-dimension-reduction" class="slide level2">
<h2>Projection pursuit for dimension reduction</h2>
<div class="columns">
<div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/joint-dist_fb031ff3565b83a76033c51ec2897840">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="index_files/figure-revealjs/joint-dist-1.png" width="480"></p>
</figure>
</div>
</div>
</div>
</div><div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/1d-projections_e918df44c9017125659fb5b07050a3b0">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="index_files/figure-revealjs/1d-projections-1.png" width="528"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>I will first use a simple example to explain the projection pursuit algorithm, before showing two visualisation on diagnosing the optimisers.</p>
<p>On the left is a density plot with the marginal distribution of the two variables on the top and right. We can construct a projection matrix and multiple it with the data to get a projection.</p>
<p>On the right are 21 projection matrices and their corresponding projections. If we give X1 zero weight and X2 full weight, you will get the distribution of X2 as in the first panel on the right. Similarly, ….</p>
<p>Sometimes, the interesting structure in the high-dimensional data may be unknown and we could use a grand tour to randomly generate projection matrices and view the projections. Once we have some ideas of the structure we’re looking for, for example, clusters or central mass, we will choose an index function, which maps the projection to a single value. The guided tour uses optimisation to maximum the index function given the projection matrices.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="optimisation-in-projection-pursuit" class="slide level2">
<h2>Optimisation in projection pursuit</h2>
<div class="columns">
<div class="column">
<p>Data: <span class="math inline">\(\mathbf{X}_{n \times p}\)</span>;</p>
<p>Projection matrix: <span class="math inline">\(\mathbf{A}_{p\times d}\)</span></p>
<p>Projection: <span class="math inline">\(\mathbf{Y}_{n \times d} = \mathbf{X} \cdot \mathbf{A}\)</span></p>
<p>Index function <span class="math inline">\(f: \mathbb{R}^{n \times d} \mapsto \mathbb{R}\)</span></p>
<p>Optimisation: <span class="math display">\[\arg \max_{\mathbf{A}} f(\mathbf{X} \cdot \mathbf{A})  ~~~ s.t. ~~~ \mathbf{A}^{\prime} \mathbf{A} = I_d\]</span></p>
</div><div class="column">

</div>
</div>
<aside class="notes">
<p>We can put these into notations. The data <span class="math inline">\(X\)</span> is n * p, N being the number of observation and P being the original data dimension. The projection matrix A, has dimension of p * d.&nbsp;The projection that multiply X and A will be the data in the lower dimension d.</p>
<p>The index function maps the projection into a single scale, which will be optimized over the space of A. Also the projection matrices have to subject to the orthonormality condition to be a projection matrix.</p>
<p>We use stochastic optimisers for this problem. These optimisers repetitively generate projection matrices, decide if to accept or reject the new position, to find the maximum. This optimisation problem differs from a common problem in that the input, A, is a matrix that contains p * d numbers. It is not easy to understand where in the matrix space, the optimisers have visited, so we would like some visual tools to help here.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="visualise-the-projection-matrix-space" class="slide level2 smaller">
<h2>Visualise the projection matrix space</h2>
<div class="columns">
<div class="column">
<p>Data: <span class="math inline">\(\mathbf{X}_{n \times p}\)</span>;</p>
<p>Projection matrix: <span class="math inline">\(\mathbf{A}_{p\times d}\)</span></p>
<p>Projection: <span class="math inline">\(\mathbf{Y}_{n \times d} = \mathbf{X} \cdot \mathbf{A}\)</span></p>
<p>Index function <span class="math inline">\(f: \mathbb{R}^{n \times d} \mapsto \mathbb{R}\)</span></p>
<p>Optimisation: <span class="math display">\[\arg \max_{\mathbf{A}} f(\mathbf{X} \cdot \mathbf{A})  ~~~ s.t. ~~~ \mathbf{A}^{\prime} \mathbf{A} = I_d\]</span></p>
<p>Simulation:</p>
<ul>
<li>simulated 5D data project to 1D</li>
<li>two optimisers</li>
</ul>
</div><div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-2_cc234787a6f7fda315277158be9b7bfd">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-2-1.png" width="576"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>In this example, we simulated 5D data and project them into 1D.</p>
<p>Because the data is simulated, we know the projection matrix that gives the most interesting projection, which is the star here.</p>
<p>Viewing a 5D space can be challenging, so here, we perform a PCA on all the bases to obtain a 2D view.</p>
<p>Because of the orthonormality condition, the domain for 1D projection is a p-d unit sphere and it becomes a circle when further reduced by PCA.</p>
<p>Here you can see how the two optimisers progress from the start to find the maximum.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="visualise-the-projection-matrix-space-1" class="slide level2">
<h2>Visualise the projection matrix space</h2>
<div class="columns">
<div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-3_705e17639879ff88ff48ffd249602725">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-3-1.png" width="576"></p>
</figure>
</div>
</div>
</div>
</div><div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-4_0ec1b194e2126557945bc68fa4479fd1">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-4-1.gif"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="visualise-the-projection-matrix-space-2" class="slide level2">
<h2>Visualise the projection matrix space</h2>
<div class="columns">
<div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-5_b8ba05e09a3ef29a57e21867c3fde084">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-5-1.png" width="576"></p>
</figure>
</div>
</div>
</div>
</div><div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-6_07702a38330f4b0126cf9a1740bbd743">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/tour-dynamic.gif"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="cubble-an-r-package-for-organizing-and-wrangling-multivariate-spatio-temporal-data-in-r" class="title-slide slide level1 center" data-background-image="figures/logo-cubble.png" data-background-size="10%" data-background-position="top 3% right 3%">
<h1>Cubble: An R package for organizing and wrangling multivariate spatio-temporal data in R</h1>

</section>
<section id="motivation" class="slide level2">
<h2>Motivation</h2>
<div class="columns">
<div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-7_e88bedc13692022112c00f4c0cbc79bc">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/sf-df.png" width="562"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/sf-logo.gif"></p>
</figure>
</div>
</div>
</div>
</div><div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-8_2b5b28065936ddff69fcf58e0274eada">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/tsibble-df.png" style="height:80.0%" width="554"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-9_dad494d4ff931455a706bac9c3eba934">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/tsibble-logo.svg" style="width:30.0%;height:30.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>

<!-- -   In a long table with duplicated spatial variables? That would give a lot of duplication if daily data & large spatial objects. -->
<!-- -   Sometimes, we would like to make per station summary, ideally, each station forms a row. -->
<!-- -   Other time, we would like to work on temporal variables in the long form. -->
<!-- -   A lot of padding work to arrange the spatio-temporal data in the format convenient for spatial & temporal operations! -->
<aside class="notes">
<p>If you have worked with spatial data in R, you will probably know about the sf package. In an oversimplified term, the package uses nested list to wrap up coordinates into a special column, geom. The package also connects to external libraries that allow us to do geospatial operations.</p>
<p>On the other hand, we have tsibble that arranges time series data into a long form with explicit column for the time variable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="australian-weather-station-data" class="slide level2 smaller">
<h2>Australian weather station data</h2>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-10_cca740fe74c743fffe4ab3649b12ae54">

</div>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-11_4d6c842a735553173f661a6dfdcc3b22">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>stations</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 6
   id            lat  long  elev name                       wmo_id
   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                       &lt;dbl&gt;
 1 ASN00060139 -31.4  153.   4.2 port macquarie airport aws  94786
 2 ASN00068228 -34.4  151.  10   bellambi aws                94749
 3 ASN00017123 -28.1  140.  37.8 moomba airport              95481
 4 ASN00081049 -36.4  145. 114   tatura inst sustainable ag  95836
 5 ASN00018201 -32.5  138.  14   port augusta aero           95666
 6 ASN00012314 -27.8  121. 497   leinster aero               95448
 7 ASN00036026 -24.3  144. 203   isisford post office        94345
 8 ASN00024024 -34.4  141.  30.1 loxton research centre      94682
 9 ASN00026095 -37.0  140.  17   cape jaffa (the limestone)  94813
10 ASN00003057 -16.5  123.   7   cygnet bay                  94201
# … with 20 more rows</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/data-stations_f3cf32dcab0bc26593d897c9ebbe7d17">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="index_files/figure-revealjs/data-stations-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-12_5a6d415a95260560b8628fbd6d1ed206">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>ts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,632 × 5
   id          date        prcp  tmax  tmin
   &lt;chr&gt;       &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 ASN00003057 2020-01-01     0  36.7  26.9
 2 ASN00003057 2020-01-02    41  34.2  24  
 3 ASN00003057 2020-01-03     0  35    25.4
 4 ASN00003057 2020-01-04    40  29.1  25.4
 5 ASN00003057 2020-01-05  1640  27.3  24.3
 6 ASN00003057 2020-01-06  1832  29.2  23.2
 7 ASN00003057 2020-01-07    42  36    21  
 8 ASN00003057 2020-01-08   300  31.5  25  
 9 ASN00003057 2020-01-09    90  32.2  25.3
10 ASN00003057 2020-01-10     0  34    25.9
# … with 10,622 more rows</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/data-ts_576d2a61819a04bfd340f0146c688cf1">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="index_files/figure-revealjs/data-ts-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>Initially I was working with climate data where I have 30 weather stations and its spatial information and time series data to record the daily climate variables in 2020. I was trying to use sf to handle the spatial side and tsibble to handle the temporal side. But the two packages do not work well with each other. This is expected since neither sf or tsibble is designed to handle spatio-temporal data.</p>
<p>This motivates me to think about the spatio-temporal data structure in R.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="whats-available-for-spatio-temporal-data---stars" class="slide level2">
<h2>What’s available for spatio-temporal data? - stars</h2>
<div class="columns">
<div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-13_e144dba5b44e4ef99097a8b166ec57f7">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/stars-model.png" style="width:80.0%;height:60.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column">
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-14_eb6795929ba50458c67e1bb239ea0202">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/stars-df.png" width="853"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>What’s available at that time is a package called <code>stars</code>, it uses a dense array to structure spatio-temporal data. You can think of it as stacking snapshots of the space along the time axis.</p>
<p>This is great for satellite data, but it may not be the most obvious solution for analysts who prefer to operate on a 2D table format.</p>
<p>Hence, I designed a data structure called cubble to handle saptio-temporal vector data.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="cubble-a-spatio-temporal-vector-data-structure" class="slide level2">
<h2>Cubble: a spatio-temporal vector data structure</h2>

<img data-src="figures/long-nested-form.png" width="960" class="r-stretch quarto-figure-center"><div class="footer">
<p><a href="https://huizezhang-sherry.github.io/cubble/articles/cubble-design.html" class="uri">https://huizezhang-sherry.github.io/cubble/articles/cubble-design.html</a></p>
</div>
<aside class="notes">
<p>Cubble is a nested object built on tibble that allow easy pivoting between the spatial and temporal form.</p>
<p>The nested form is similar to the sf data frame you seen before, with an additional list column called ts that nests all the temporal variables</p>
<p>The long form mimics the long table in tsibble where each row is cross identified by the site and date in a long table</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="cubble-a-spatio-temporal-vector-data-structure-1" class="slide level2">
<h2>Cubble: a spatio-temporal vector data structure</h2>
<p>Cubble is a nested object built on tibble that allow easy pivoting between spatial and temporal form.</p>

<img data-src="figures/cubble-operations.png" width="1111" class="r-stretch quarto-figure-center"><aside class="notes">
<p>What cubble do is to provide a linking between the two forms through the pair <code>face_temporal()</code> and <code>face_spatial()</code>.</p>
<p>With <code>face_temporal()</code>, the focus of the data is now on the temporal face of the spatio-temporal cube and this corresponds to switch the data to the long form.</p>
<p>With <code>face_spatial()</code>, the long cubble is switched back to the nested form, the spatial face of the datacube.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="cast-your-data-into-a-cubble" class="slide level2">
<h2>Cast your data into a cubble</h2>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-17_e5c67d1f22663a0df7a6bd3b1f3d07f6">
<div class="sourceCode cell-code" id="cb5" data-code-line-numbers="2|3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>(weather <span class="ot">&lt;-</span> <span class="fu">as_cubble</span>(</span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">list</span>(<span class="at">spatial =</span> stations, <span class="at">temporal =</span> ts),</span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="at">key =</span> id, <span class="at">index =</span> date, <span class="at">coords =</span> <span class="fu">c</span>(long, lat)</span>
<span id="cb5-4"><a href="#cb5-4"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># cubble:   id [30]: nested form
# bbox:     [114.09, -41.88, 152.87, -11.65]
# temporal: date [date], prcp [dbl], tmax [dbl], tmin [dbl]
   id            lat  long  elev name              wmo_id ts                
   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt; &lt;list&gt;            
 1 ASN00003057 -16.5  123.   7   cygnet bay         94201 &lt;tibble [316 × 4]&gt;
 2 ASN00005007 -22.2  114.   5   learmonth airport  94302 &lt;tibble [363 × 4]&gt;
 3 ASN00005084 -21.5  115.   5   thevenard island   94303 &lt;tibble [366 × 4]&gt;
 4 ASN00010515 -32.1  117. 199   beverley           95615 &lt;tibble [354 × 4]&gt;
 5 ASN00012314 -27.8  121. 497   leinster aero      95448 &lt;tibble [366 × 4]&gt;
 6 ASN00014401 -11.7  133.  19.2 warruwi            94139 &lt;tibble [354 × 4]&gt;
 7 ASN00014703 -15.7  137.  12.2 centre island      94248 &lt;tibble [364 × 4]&gt;
 8 ASN00017123 -28.1  140.  37.8 moomba airport     95481 &lt;tibble [361 × 4]&gt;
 9 ASN00018201 -32.5  138.  14   port augusta aero  95666 &lt;tibble [364 × 4]&gt;
10 ASN00022841 -35.7  138.   5   kingscote aero     95807 &lt;tibble [363 × 4]&gt;
# … with 20 more rows</code></pre>
</div>
</div>
<ul>
<li>the spatial data (<code>stations</code>) can be an <code>sf</code> object and temporal data (<code>ts</code>) can be a <code>tsibble</code> object.</li>
</ul>
<aside class="notes">
<ul>
<li><p>To cast the two separate tables into a cubble, you can supply them in a named list.</p></li>
<li><p>You also need to tell cubble some identifiers it looks for</p></li>
<li><p>The <code>key</code> argument is the spatial identifier that connects the two tables.</p></li>
<li><p>The <code>index</code> argument is the temporal identifier that prescribes the timestamp.</p></li>
<li><p>The <code>coords</code> argument is to used to specify the coordinate</p></li>
</ul>
<p>[breath]</p>
<ul>
<li><p>From the cubble header, you can read that the key is <code>id</code>, there are 30 stations and it is in the nested form.</p></li>
<li><p>The third line here shows you the available temporal variables and their types.</p></li>
<li><p>Also, if the spatial and temporal data is an sf or tsibble object, they will be indicated in the header as well.</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="switch-between-the-two-forms" class="slide level2 smaller">
<h2>Switch between the two forms</h2>
<div class="columns">
<div class="column">
<p>long form</p>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-18_1cfa0e310d1a0c6cda5a4ca4ea6eb23d">

</div>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/face-temporal_d39c7a4d835008349ab7a72bc62643b9">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>(weather_long <span class="ot">&lt;-</span> weather <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">face_temporal</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># cubble:  date, id [30]: long form
# bbox:    [114.09, -41.88, 152.87, -11.65]
# spatial: lat [dbl], long [dbl], elev [dbl],
#   name [chr], wmo_id [dbl]
   id          date        prcp  tmax  tmin
   &lt;chr&gt;       &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 ASN00003057 2020-01-01     0  36.7  26.9
 2 ASN00003057 2020-01-02    41  34.2  24  
 3 ASN00003057 2020-01-03     0  35    25.4
 4 ASN00003057 2020-01-04    40  29.1  25.4
 5 ASN00003057 2020-01-05  1640  27.3  24.3
 6 ASN00003057 2020-01-06  1832  29.2  23.2
 7 ASN00003057 2020-01-07    42  36    21  
 8 ASN00003057 2020-01-08   300  31.5  25  
 9 ASN00003057 2020-01-09    90  32.2  25.3
10 ASN00003057 2020-01-10     0  34    25.9
# … with 10,622 more rows</code></pre>
</div>
</div>
</div><div class="column">
<p>back to the nested form:</p>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-19_cc25d015af8454ac02f0f1731067644c">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>(weather_back <span class="ot">&lt;-</span> weather_long <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2"></a>   <span class="fu">face_spatial</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># cubble:   id [30]: nested form
# bbox:     [114.09, -41.88, 152.87, -11.65]
# temporal: date [date], prcp [dbl], tmax [dbl],
#   tmin [dbl]
   id        lat  long  elev name  wmo_id ts      
   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;list&gt;  
 1 ASN000… -16.5  123.   7   cygn…  94201 &lt;tibble&gt;
 2 ASN000… -22.2  114.   5   lear…  94302 &lt;tibble&gt;
 3 ASN000… -21.5  115.   5   thev…  94303 &lt;tibble&gt;
 4 ASN000… -32.1  117. 199   beve…  95615 &lt;tibble&gt;
 5 ASN000… -27.8  121. 497   lein…  95448 &lt;tibble&gt;
 6 ASN000… -11.7  133.  19.2 warr…  94139 &lt;tibble&gt;
 7 ASN000… -15.7  137.  12.2 cent…  94248 &lt;tibble&gt;
 8 ASN000… -28.1  140.  37.8 moom…  95481 &lt;tibble&gt;
 9 ASN000… -32.5  138.  14   port…  95666 &lt;tibble&gt;
10 ASN000… -35.7  138.   5   king…  95807 &lt;tibble&gt;
# … with 20 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">identical</span>(weather_back, weather)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li><p>Here is what a cubble look like when being switched between the long and the nested form.</p>
<ul>
<li>With the <code>weather</code> object we just created, we turn it into the long form with the function <code>face_temporal()</code></li>
</ul></li>
<li><p>Notice that the third line in the header now changes to see the available spatial variables</p></li>
</ul>
<p>[breath]</p>
<ul>
<li><p>On the right, <code>weather_long</code> is switched back the nested form with the function <code>face_spatial()</code></p></li>
<li><p>As you can see from the last line of code, <code>face_temporal()</code> and <code>face_spatial()</code> are the exact inverse.</p></li>
<li><p>Hence <code>weather_back</code> and <code>weather</code> are identical</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="access-variables-in-the-other-form" class="slide level2 smaller">
<h2>Access variables in the other form</h2>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-20_bda9f8feef6546ba4e616b93495d9e63">

</div>
<p>Reference temporal variables with <code>$</code></p>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-21_2cab6b1d175e0260230473fe5b387185">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>weather <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">mutate</span>(<span class="at">avg_tmax =</span> <span class="fu">mean</span>(ts<span class="sc">$</span>tmax, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># cubble:   id [30]: nested form
# bbox:     [114.09, -41.88, 152.87, -11.65]
# temporal: date [date], prcp [dbl], tmax [dbl], tmin [dbl]
   id            lat  long  elev name              wmo_id ts                 avg_tmax
   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt; &lt;list&gt;                &lt;dbl&gt;
 1 ASN00003057 -16.5  123.   7   cygnet bay         94201 &lt;tibble [316 × 4]&gt;     32.4
 2 ASN00005007 -22.2  114.   5   learmonth airport  94302 &lt;tibble [363 × 4]&gt;     33.2
 3 ASN00005084 -21.5  115.   5   thevenard island   94303 &lt;tibble [366 × 4]&gt;     30.7
 4 ASN00010515 -32.1  117. 199   beverley           95615 &lt;tibble [354 × 4]&gt;     26.4
 5 ASN00012314 -27.8  121. 497   leinster aero      95448 &lt;tibble [366 × 4]&gt;     29.6
 6 ASN00014401 -11.7  133.  19.2 warruwi            94139 &lt;tibble [354 × 4]&gt;     31.8
 7 ASN00014703 -15.7  137.  12.2 centre island      94248 &lt;tibble [364 × 4]&gt;     31.9
 8 ASN00017123 -28.1  140.  37.8 moomba airport     95481 &lt;tibble [361 × 4]&gt;     29.0
 9 ASN00018201 -32.5  138.  14   port augusta aero  95666 &lt;tibble [364 × 4]&gt;     25.7
10 ASN00022841 -35.7  138.   5   kingscote aero     95807 &lt;tibble [363 × 4]&gt;     20.6
# … with 20 more rows</code></pre>
</div>
</div>
<div class="fragment">
<p>Move spatial variables into the long form</p>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-22_b32939c0d7e326774c3793902c7cb627">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>weather_long <span class="sc">%&gt;%</span> <span class="fu">unfold</span>(long, lat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># cubble:  date, id [30]: long form
# bbox:    [114.09, -41.88, 152.87, -11.65]
# spatial: lat [dbl], long [dbl], elev [dbl], name [chr], wmo_id [dbl]
   id          date        prcp  tmax  tmin  long   lat
   &lt;chr&gt;       &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 ASN00003057 2020-01-01     0  36.7  26.9  123. -16.5
 2 ASN00003057 2020-01-02    41  34.2  24    123. -16.5
 3 ASN00003057 2020-01-03     0  35    25.4  123. -16.5
 4 ASN00003057 2020-01-04    40  29.1  25.4  123. -16.5
 5 ASN00003057 2020-01-05  1640  27.3  24.3  123. -16.5
 6 ASN00003057 2020-01-06  1832  29.2  23.2  123. -16.5
 7 ASN00003057 2020-01-07    42  36    21    123. -16.5
 8 ASN00003057 2020-01-08   300  31.5  25    123. -16.5
 9 ASN00003057 2020-01-09    90  32.2  25.3  123. -16.5
10 ASN00003057 2020-01-10     0  34    25.9  123. -16.5
# … with 10,622 more rows</code></pre>
</div>
</div>
<aside class="notes">
<ul>
<li><p>Sometimes, you may need to access variables from the other form for your analysis.</p></li>
<li><p>For example, we may want to calculate some per station summary of the time series data.</p></li>
<li><p>We can refer to the temporal variables from the nested form with the <code>$</code> sign.</p></li>
<li><p>Here I’m calculating the average maximum temperature across the whole year for each station and I need to get access to <code>tmax</code> from the list-column <code>ts</code>.</p></li>
<li><p>In the long form, you need the cubble verb <code>unfold()</code> to move the spatial variables into the long form.</p></li>
<li><p>Here I move the two coordinate columns into the long form and later we will see how it can help us to create a glyph map.</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section></section>
<section>
<section id="explore-temporal-pattern-across-space" class="title-slide slide level1 text-bottom center" data-background-image="figures/temporal-pattern-across-space.png" data-background-size="80% 90%" data-background-position="center">
<h1>Explore temporal pattern across space</h1>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-23_dc538de2461a04942b6a38cdec8418ee">
<style type="text/css">
.text-bottom h2{
  background-color: rgba(255, 255, 255, 0.6);
  border-radius: 30px 30px 30px 30px;
  color: black; 
  position: absolute;
  top: 78%;
  left: 3%;
  font-size: 1.5em
}
</style>
</div>
<aside class="notes">
<p>Sometimes, although we technically have spatio-temporal data, we may choose to fix a few stations to explore their temporal patterns, or select a few timestamps to explore their spatial distributions.</p>
<p>A more holistic approach is to explore the space and time simultaneously and now we will see an example of how to use cubble to explore temporal pattern across space in a glyph map.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="why-do-you-need-a-glyph-map" class="slide level2">
<h2>Why do you need a glyph map?</h2>
<p><a different="" motivation="" for="" glyph="" map="" href=""></a></p><a different="" motivation="" for="" glyph="" map="" href="">
<aside class="notes">
<p>Here is a typical plot you may have seen when someone tries to visualise their spatio-temporal data. The x and y axes are the coordinates, here I simplify it with only two points, but in reality you may see a collection of points in space or a raster image. Each facet here shows the space in different timestamp and the values are mapped into color.</p>
<p>The problem of this type of visualisation is that it becomes difficult to comprehend the temporal structure of the data since you have to compare points at the same location across panels to digest the pattern.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</a></section><a different="" motivation="" for="" glyph="" map="" href="">
</a><section id="why-do-you-need-a-glyph-map-1" class="slide level2"><a different="" motivation="" for="" glyph="" map="" href="">
<h2>Why do you need a glyph map?</h2>
</a><p><a different="" motivation="" for="" glyph="" map="" href=""></a><a different="" motivation="" href=""></a></p><a different="" motivation="" href="">
<aside class="notes">
<p>Instead the temporal pattern is much easier to observe if shown in a time series plot.</p>
<p>What a glyph map do is to put the time series glyph in the place of the location, so you can see the temporal trend in the space.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</a></section><a different="" motivation="" href="">
</a><section id="glyph-map-transformation" class="slide level2"><a different="" motivation="" href="">
<h2>Glyph map transformation</h2>
<div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-24_afeb231b26fa52e5923ef2515851f848">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figures/glyph-steps.png" width="1354"></p>
</figure>
</div>
</div>
</div>
</a><div class="cell" data-layout-align="center" data-hash="index_cache/revealjs/unnamed-chunk-25_564f3597935bb2255edf936c3e03cf3e"><a different="" motivation="" href="">
</a><div class="sourceCode cell-code" id="cb17"><a different="" motivation="" href=""></a><pre class="sourceCode numberSource r number-lines code-with-copy"><a different="" motivation="" href=""><code class="sourceCode r"><span id="cb17-1"></span></code></a><code class="sourceCode r"><a href="#cb17-1"></a>DATA <span class="sc">%&gt;%</span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="fu">geom_glyph</span>(</span>
<span id="cb17-4"><a href="#cb17-4"></a>    <span class="fu">aes</span>(<span class="at">x_major =</span> X_MAJOR, <span class="at">x_minor =</span> X_MINOR,</span>
<span id="cb17-5"><a href="#cb17-5"></a>        <span class="at">y_major =</span> Y_MAJOR, <span class="at">y_minor =</span> Y_MINOR)) <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>  ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">
<p><a href="https://huizezhang-sherry.github.io/cubble/articles/glyph.html" class="uri">https://huizezhang-sherry.github.io/cubble/articles/glyph.html</a></p>
</div>
<aside class="notes">
<ul>
<li><p>I have a short illustration to show you how the transformation works</p></li>
<li><p>Here (1) shows a single station on the map with its long and lat coordinate and (2) is its associated time series.</p></li>
<li><p>Here you know the range of your x and y axis and you can use linear algebra to transform them into a different scale.</p></li>
<li><p>In step (3), the time series in still the same but its scale has been transformed to a width of 1 and heights of 0.3 and the center in this scale is where the original point lays.</p></li>
<li><p>Once we have the time series in the transformed axes, they can be placed onto the map as in (4)</p></li>
<li><p>To make a glyph map, you can use the <code>geom_glyph</code> function from the cubble package.</p></li>
<li><p>It requires a pair of major and a pair of minor variable as required aesthetics</p></li>
<li><p>The major variable are the spatial coordinates, long and lat here and the minor variable are the temporal coordinates, date and tmax here.</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="avg.-max.-temperature-on-the-map" class="slide level2 smaller">
<h2>Avg. max. temperature on the map</h2>
<div class="cell columns column-output-location" data-layout-align="center" data-hash="index_cache/revealjs/glyphmap_852a5b463d1300b02e1f583e5fb3f06b">
<div class="column">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>cb <span class="ot">&lt;-</span> <span class="fu">as_cubble</span>(</span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">list</span>(<span class="at">spatial =</span> stations, <span class="at">temporal =</span> ts),</span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="at">key =</span> id, <span class="at">index =</span> date, <span class="at">coords =</span> <span class="fu">c</span>(long, lat)</span>
<span id="cb18-4"><a href="#cb18-4"></a>)</span>
<span id="cb18-5"><a href="#cb18-5"></a></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="fu">set.seed</span>(<span class="dv">0927</span>)</span>
<span id="cb18-7"><a href="#cb18-7"></a>cb_glyph <span class="ot">&lt;-</span> cb <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>  <span class="fu">face_temporal</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> </span>
<span id="cb18-12"><a href="#cb18-12"></a>  <span class="fu">summarise</span>(<span class="at">tmax =</span> <span class="fu">mean</span>(tmax, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-13"><a href="#cb18-13"></a>  <span class="fu">unfold</span>(long, lat)</span>
<span id="cb18-14"><a href="#cb18-14"></a></span>
<span id="cb18-15"><a href="#cb18-15"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> oz_simp, </span>
<span id="cb18-17"><a href="#cb18-17"></a>          <span class="at">fill =</span> <span class="st">"grey90"</span>, </span>
<span id="cb18-18"><a href="#cb18-18"></a>          <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19"></a>  <span class="fu">geom_glyph</span>(</span>
<span id="cb18-20"><a href="#cb18-20"></a>    <span class="at">data =</span> cb_glyph,</span>
<span id="cb18-21"><a href="#cb18-21"></a>    <span class="fu">aes</span>(<span class="at">x_major =</span> long, <span class="at">x_minor =</span> month,</span>
<span id="cb18-22"><a href="#cb18-22"></a>        <span class="at">y_major =</span> lat, <span class="at">y_minor =</span> tmax),</span>
<span id="cb18-23"><a href="#cb18-23"></a>    <span class="at">width =</span> <span class="dv">2</span>, <span class="at">height =</span> <span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb18-24"><a href="#cb18-24"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_map</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="index_files/figure-revealjs/glyphmap-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>Here is an example of using cubble</p>
<p>First you create a cubble object with the <code>stations</code> and <code>ts</code> data using <code>as_cubble</code>. This by default creates the cubble in the nested form, easy for spatial operations.</p>
<p>The second block involves wrangling the data using the nested and long form. Sampling 20 stations is a spatial operations, so it is performed in the nested form. Then we need to do a summary of average maximum temperature by month. It is a temporal operation, so the cubble is then switched to the long form with <code>face_temporal()</code>.</p>
<p><code>unfold</code> is another cubble verb that moves the spatial variable into the long form temporarily. We need to do this because ggplot requires all the variables to be in the same table</p>
<p><code>geom_glyph()</code> is also implemented in cubble, it is intended to make a glyph map.</p>
<p>[breath]</p>
<ul>
<li><p>On the map, you can see that the temperature curve in the north and south (the Tasmania Island) are relative constant throughout the year.</p></li>
<li><p>Those inland stations, for example in the eastern Australia, have a much visible variation in the year, as compared to the coastline ones.</p></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="additional-information" class="slide level2 smaller" data-background-image="figures/logo-all.png" data-background-size="25%" data-background-position="top 3% right 3%">
<h2>Additional Information</h2>
<p>Slides created via quarto available at</p>
<center>
<a href="https://sherryzhang-ireland2023.netlify.app/" class="uri">https://sherryzhang-ireland2023.netlify.app/</a>
</center>
<p>All the materials used to prepare the slides are available at</p>
<center>
<a href="https://github.com/huizezhang-sherry/ireland2023" class="uri">https://github.com/huizezhang-sherry/ireland2023</a>
</center>
<p><br></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg> cubble package: <a href="https://CRAN.R-project.org/package=cubble" class="uri">https://CRAN.R-project.org/package=cubble</a></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg> ferrn package: <a href="https://CRAN.R-project.org/package=ferrn" class="uri">https://CRAN.R-project.org/package=ferrn</a></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></svg> ferrn paper: <a href="https://doi.org/10.32614/RJ-2021-105" class="uri">https://doi.org/10.32614/RJ-2021-105</a></p>
<p><br></p>
<p>H. Sherry Zhang</p>
<p>Supervised by Dianne Cook, Patricia Menéndez, Ursula Laa, and Nicolas Langrené</p>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <link rel="stylesheet" href="assets/syntax-highlight.css">
    <link rel="stylesheet" href="assets/monash-after-body.css">
    <link rel="stylesheet" href="assets/fontawesome-free-6.1.1-web/css/all.min.css">
    <script src="assets/fontawesome-free-6.1.1-web/js/all.min.js"></script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        function fireSlideChanged(previousSlide, currentSlide) {

          // dispatch for htmlwidgets
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for reveal
        if (window.Reveal) {
          window.Reveal.addEventListener("slidechanged", function(event) {
            fireSlideChanged(event.previousSlide, event.currentSlide);
          });
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

</body></html>